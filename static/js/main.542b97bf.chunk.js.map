{"version":3,"sources":["conifg/index.ts","styles.ts","components/AppBar/index.tsx","components/LCD/styles.ts","components/LCD/index.tsx","components/LEDs/styles.ts","components/LEDs/index.tsx","services/webusb.ts","state.ts","actions.ts","index.tsx"],"names":["ARDUINO_COMMANDS","createStyles","root","height","connectionStatus","deviceName","onConnectClick","AppBar","position","style","alignItems","justifyContent","fontSize","Button","variant","color","onClick","startIcon","width","Typography","frame","backgroundColor","overflow","cursor","display","margin","character","flexDirection","marginTop","marginRight","charRow","flex","paper","padding","pixel","rowsContainer","flexWrap","keys$","fromEvent","window","pipe","pluck","filter","key","pixelMap","hasOwnProperty","Character","withStyles","styles","char","classes","transformed","className","map","row","i","val","j","DisplayRow","hasFocus","text","useState","chars","setChars","useEffect","length","Array","fill","cursorBlinkInterval","setInterval","fc","slice","clearInterval","c","React","forwardRef","ref","onNewCharacter","setText","keysSubscription","subscribe","r","unsubscribe","Paper","led","borderRadius","boxShadow","zoom","content","marginLeft","backgroundImage","ledWithSlider","FadeSlider","alignSelf","thumb","border","active","track","rail","Slider","LEDWithSlider","onValueChange","brightness","setBrightness","ledStyle","opacity","min","max","onChange","_","value","props","onRedLedValueChange","onYellowLedValueChange","onGreenLedValueChange","SUPPORTED_DEVICES","textEncoder","TextEncoder","selectInterface","device","a","configuration","interfaces","intf","alternate","alternates","find","alt","interfaceClass","alternateSetting","endpoints","interfaceNumber","Boolean","interfaceConfig","Error","claimInterface","selectAlternateInterface","findEndpoint","targetDirection","endpoint","direction","endpointNumber","getPairedDevice","navigator","usb","getDevices","then","pairDevice","requestDevice","filters","initializeDevice","open","selectConfiguration","endpointInNumber","endpointOutNumber","controlTransferOut","send","data","transferOut","encode","BehaviorSubject","connection","undefined","status","sendCommand","command","payload","state","webusb","padEnd","setupDevice","next","connectPairedDevice","connectNewDevice","setLCDChar","setRedLEDValue","Math","round","toString","setYellowLEDValue","setGreenLEDValue","App","LCDHasFocus","setLCDHasFocus","LCDElement","useRef","setConnectionStatus","productName","setDeviceName","pointerEvents","containerStyle","setContainerStyle","stateSubscription","s","actions","updateLCDHasFocus","event","current","getBoundingClientRect","x","y","clientX","clientY","disableComponents","removeEventListener","addEventListener","Container","maxWidth","Grid","container","spacing","item","xs","LCD","LEDs","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.542b97bf.chunk.js","sourcesContent":["export enum ARDUINO_COMMANDS {\n    SET_RED_LCD_BRIGHTNESS,\n    SET_YELLOW_LCD_BRIGHTNESS,\n    SET_GREEN_LCD_BRIGHTNESS,\n    SET_SERVO_POSITION,\n    SET_LCD_CHAR,\n};\n\nexport const SUPPORTED_DEVICES = [\n    { 'vendorId': 0x2341, 'productId': 0x8036 }, // Arduino Leonardo\n    { 'vendorId': 0x2341, 'productId': 0x8037 }, // Arduino Micro\n    { 'vendorId': 0x2341, 'productId': 0x804d }, // Arduino/Genuino Zero\n    { 'vendorId': 0x2341, 'productId': 0x804e }, // Arduino/Genuino MKR1000\n    { 'vendorId': 0x2341, 'productId': 0x804f }, // Arduino MKRZERO\n    { 'vendorId': 0x2341, 'productId': 0x8050 }, // Arduino MKR FOX 1200\n    { 'vendorId': 0x2341, 'productId': 0x8052 }, // Arduino MKR GSM 1400\n    { 'vendorId': 0x2341, 'productId': 0x8053 }, // Arduino MKR WAN 1300\n    { 'vendorId': 0x2341, 'productId': 0x8054 }, // Arduino MKR WiFi 1010\n    { 'vendorId': 0x2341, 'productId': 0x8055 }, // Arduino MKR NB 1500\n    { 'vendorId': 0x2341, 'productId': 0x8056 }, // Arduino MKR Vidor 4000\n    { 'vendorId': 0x2341, 'productId': 0x8057 }, // Arduino NANO 33 IoT\n    { 'vendorId': 0x239A }, // Adafruit Boards!\n];\n","import { createStyles } from '@material-ui/core/styles';\n\nexport default createStyles({\n  root: {\n    height: '100vh',\n  },\n});\n","import React from 'react';\nimport { AppBar, Button, Typography } from '@material-ui/core';\nimport UsbIcon from '@material-ui/icons/Usb';\n\ninterface Props {\n    connectionStatus: 'NOT_CONNECTED' | 'CONNECTED';\n    deviceName?: string;\n    onConnectClick: () => void;\n}\n\nexport default ({ connectionStatus, deviceName, onConnectClick }: Props) => (\n    <AppBar position=\"static\" style={{ alignItems: 'center', height: 60, justifyContent: 'center', fontSize: 20 }}>\n        {\n            connectionStatus === 'NOT_CONNECTED' ?\n                <Button\n                    variant=\"contained\"\n                    color=\"primary\"\n                    onClick={onConnectClick}\n                    startIcon={<UsbIcon />}\n                    style={{ height: '100%', width: '100%', fontSize: 'inherit' }}\n                >\n                    CONNECT DEVICE\n                </Button> :\n                <div>\n                    <Typography style={{ fontSize: 'inherit' }}>CONNECTED TO {deviceName}</Typography>\n                </div>\n        }\n    </AppBar >\n);\n","import { createStyles } from '@material-ui/core/styles';\n\nexport default createStyles({\n    frame: {\n        backgroundColor: 'black',\n        height: 240,\n        overflow: 'auto',\n        width: 680,\n        '&:hover': {\n            cursor: 'pointer'\n        }\n    },\n    display: {\n        backgroundColor: 'rgba(20, 80, 230)',\n        height: 160,\n        margin: 40\n    },\n    character: {\n        display: 'flex',\n        flexDirection: 'column',\n        marginTop: 4,\n        marginRight: 3\n    },\n    charRow: {\n        display: 'flex',\n        flex: 1,\n    },\n    paper: {\n        display: 'flex',\n        justifyContent: 'center',\n        padding: 40,\n    },\n    pixel: {\n        display: 'flex',\n        flex: 1,\n        height: 5,\n        margin: 0.5,\n        width: 5\n    },\n    rowsContainer: {\n        display: 'flex',\n        flexWrap: 'wrap',\n        justifyContent: 'space-around',\n        padding: '28px 35px'\n    },\n});\n","import React, { useEffect, useState } from 'react'\nimport { Paper, withStyles, WithStyles } from '@material-ui/core';\nimport { fromEvent } from 'rxjs';\nimport { filter, pluck } from 'rxjs/operators';\n\nimport styles from './styles'\nimport pixelMap from './pixel-map.json';\n\nconst keys$ = fromEvent<KeyboardEvent>(window, 'keyup')\n    .pipe(\n        pluck('key'),\n        filter(key => pixelMap.hasOwnProperty(key) || key === 'Backspace')\n    );\n\nconst Character = withStyles(styles)(({ char, classes }: { char: string } & WithStyles<typeof styles>) => {\n    const transformed = (pixelMap as { [k: string]: Array<Array<0 | 1>> })[char];\n\n    return (\n        <div className={classes.character}>\n            {\n                transformed.map(\n                    (row, i) => (\n                        <div key={i} className={classes.charRow}>\n                            {\n                                row.map(\n                                    (val, j) =>\n                                        <div\n                                            className={classes.pixel}\n                                            key={j}\n                                            style={{ backgroundColor: val === 1 ? 'white' : 'rgba(0, 50, 240)' }}\n                                        ></div>\n                                )\n                            }\n                        </div>\n                    )\n                )\n            }\n        </div>\n    );\n});\n\nconst DisplayRow = withStyles(styles)(({ classes, hasFocus, text }: { hasFocus: boolean, text: string } & WithStyles<typeof styles>) => {\n    const [chars, setChars] = useState<string[]>([])\n\n    useEffect(() => {\n        if (text.length === 32 || !hasFocus) {\n            setChars([...text, ...Array(32 - text.length).fill(' ')]);\n            return\n        }\n\n        setChars([\n            ...text,\n            '_',\n            ...Array(31 - text.length).fill(' ')\n        ]);\n\n        const cursorBlinkInterval = setInterval(() => {\n            setChars(fc => [\n                ...text.slice(0, text.length),\n                fc[text.length] === '_' ? ' ' : '_',\n                ...Array(31 - text.length).fill(' ')\n            ]);\n        }, 500);\n\n        return () => clearInterval(cursorBlinkInterval);\n    }, [hasFocus, text]);\n\n    return (\n        <div className={classes.rowsContainer}>\n            {chars.map((c, i) => <Character char={c} key={i} />)}\n        </div>\n    );\n});\n\ninterface Props {\n    hasFocus: boolean\n    onNewCharacter: (char: string) => void;\n}\n\nexport default withStyles(styles)(\n    React.forwardRef<HTMLDivElement, WithStyles<typeof styles> & Props>(({ classes, hasFocus, onNewCharacter }, ref) => {\n        const [text, setText] = useState('');\n\n        useEffect(() => {\n            if (!hasFocus) {\n                return;\n            }\n\n            const updateRows = (char: string) => {\n                if (char === 'Backspace') {\n                    setText(r => r.slice(0, -1));\n                    onNewCharacter('\\b');\n                } else {\n                    setText(r => r.length < 32 ? r + char : r);\n                    onNewCharacter(char);\n                }\n            }\n\n            const keysSubscription = keys$.subscribe(updateRows)\n\n            return () => keysSubscription.unsubscribe();\n        }, [hasFocus, onNewCharacter]);\n\n        return (\n            <Paper className={classes.paper}>\n                <div className={classes.frame} ref={ref}>\n                    <div className={classes.display}>\n                        <DisplayRow hasFocus={hasFocus} text={text} />\n                    </div>\n                </div>\n            </Paper>\n        );\n    }));\n","import { createStyles } from '@material-ui/core/styles';\n\nexport default createStyles({\n    led: {\n        // Credits to https://codepen.io/Balrog994/pen/nblrk\n        borderRadius: 5,\n        boxShadow: '0px 0px 1px grey',\n        height: 10,\n        margin: 5,\n        width: 10,\n        zoom: 6,\n        '&:after': {\n            display: 'block',\n            content: '\"\"',\n            marginLeft: 1,\n            marginRight: 1,\n            width: 8,\n            height: 6,\n            '-webkit-border-top-right-radius': '4px 3px',\n            '-webkit-border-top-left-radius': '4px 3px',\n            '-webkit-border-bottom-right-radius': '4px 3px',\n            '-webkit-border-bottom-left-radius': '4px 3px',\n            backgroundImage: '-webkit-linear-gradient(top, rgba(255,255,255,0.8) 0%, rgba(255,255,255,0.2) 100%)'\n        },\n        '&:hover': {\n            cursor: 'pointer'\n        }\n    },\n    ledWithSlider: {\n        display: 'flex',\n        flex: 1,\n        justifyContent: 'center'\n    },\n    paper: {\n        display: 'flex',\n        flex: 1,\n        flexDirection: 'column',\n        padding: 40,\n        justifyContent: 'center'\n    },\n});\n\nexport const sliderStyles = {\n    root: {\n        height: 8,\n        alignSelf: 'center',\n        width: 120\n    },\n    thumb: {\n        height: 24,\n        width: 24,\n        backgroundColor: '#fff',\n        border: '2px solid currentColor',\n        marginTop: -8,\n        marginLeft: -12,\n        '&:focus, &:hover, &$active': {\n            boxShadow: 'inherit',\n        },\n    },\n    active: {},\n    track: {\n        height: 8,\n        borderRadius: 4,\n    },\n    rail: {\n        height: 8,\n        borderRadius: 4,\n    },\n}\n","import React, { useState, useEffect } from 'react';\nimport { Paper, Slider, withStyles, WithStyles } from '@material-ui/core';\n\nimport styles, { sliderStyles } from './styles';\n\ntype ValueChangeHandler = (value: number) => void;\n\nconst FadeSlider = withStyles(sliderStyles)(Slider);\n\nconst LEDWithSlider = withStyles(styles)(\n    ({ classes, color, onValueChange }: {\n        color: string,\n        onValueChange: ValueChangeHandler\n    } & WithStyles<typeof styles>\n) => {\n    const [brightness, setBrightness] = useState(0);\n\n    useEffect(() => {\n        onValueChange(brightness);\n    }, [brightness, onValueChange]);\n\n    const ledStyle = {\n        backgroundColor: color,\n        opacity: brightness < 50 ? 0.5 + brightness * 0.01 : 1,\n        boxShadow: `0px 0px ${brightness >= 50 ? (brightness - 50) * 0.1 : 0}px ${color}`\n    };\n\n    return (\n        <div className={classes.ledWithSlider}>\n            <div\n                className={classes.led}\n                onClick={() => { setBrightness(brightness > 0 ? 0 : 100); }}\n                style={ledStyle}\n            ></div>\n            <FadeSlider\n                min={0}\n                max={100}\n                onChange={(_: any, value: number | number[]) => {\n                    setBrightness(value as number);\n                }}\n                value={brightness}\n            />\n        </div>\n    )\n});\n\ninterface Props {\n    onRedLedValueChange: ValueChangeHandler;\n    onYellowLedValueChange: ValueChangeHandler;\n    onGreenLedValueChange: ValueChangeHandler;\n}\n\nexport default withStyles(styles)(({ classes, ...props }: WithStyles<typeof styles> & Props) => (\n    <Paper className={classes.paper}>\n        <LEDWithSlider onValueChange={props.onRedLedValueChange} color=\"#fb1304\" />\n        <LEDWithSlider onValueChange={props.onYellowLedValueChange} color=\"#fcf400\" />\n        <LEDWithSlider onValueChange={props.onGreenLedValueChange} color=\"#13fB04\" />\n    </Paper>\n));\n","import { SUPPORTED_DEVICES } from '../conifg';\n\nconst textEncoder = new TextEncoder();\n\nconst selectInterface = async (device: USBDevice): Promise<{ endpoints: USBEndpoint[], interfaceNumber: number }> => {\n    const [interfaceConfig] = device.configuration!.interfaces\n        .map(\n            (intf: USBInterface) => {\n                const alternate = intf.alternates.find((alt: any) => alt.interfaceClass === 0xff);\n                return alternate ?\n                    {\n                        alternateSetting: alternate.alternateSetting,\n                        endpoints: alternate.endpoints,\n                        interfaceNumber: intf.interfaceNumber\n                    } :\n                    null;\n            }\n        )\n        .filter(Boolean);\n\n    if (!interfaceConfig) {\n        throw new Error('Unable to select a valid USB interface');\n    }\n\n    const { alternateSetting, endpoints, interfaceNumber } = interfaceConfig;\n\n    await device.claimInterface(interfaceNumber);\n    await device.selectAlternateInterface(interfaceNumber, alternateSetting);\n\n    return { endpoints, interfaceNumber };\n};\n\nconst findEndpoint = (endpoints: USBEndpoint[], targetDirection: USBDirection): number | null => {\n    const endpoint = endpoints.find(({ direction }: any) => direction === targetDirection);\n    return endpoint ? endpoint.endpointNumber : null;\n};\n\n\nexport const getPairedDevice = async (): Promise<USBDevice | null> =>\n    navigator.usb.getDevices()\n        .then(([device]) => device || null)\n\nexport const pairDevice = async (): Promise<USBDevice | null> =>\n    // TODO: catch error when user closes pairing popup\n    navigator.usb.requestDevice({ filters: SUPPORTED_DEVICES });\n\nexport const initializeDevice = async (device: USBDevice): Promise<{ endpointInNumber: number, endpointOutNumber: number }> => {\n    await device.open();\n\n    if (!device.configuration) {\n        await device.selectConfiguration(1);\n    }\n\n    const { endpoints, interfaceNumber } = await selectInterface(device);\n\n    const endpointInNumber = findEndpoint(endpoints, 'in');\n    const endpointOutNumber = findEndpoint(endpoints, 'out');\n\n    if (endpointInNumber === null || endpointOutNumber === null) {\n        throw new Error('Unable to find valid USB endpoints');\n    }\n\n    await device.controlTransferOut({\n        'requestType': 'class',\n        'recipient': 'interface',\n        'request': 0x22,\n        'value': 0x01,\n        'index': interfaceNumber\n    });\n\n    return { endpointInNumber, endpointOutNumber };\n};\n\nexport const send = async (device: USBDevice, endpointNumber: number, data: string): Promise<void> => {\n    await device.transferOut(endpointNumber, textEncoder.encode(data));\n}\n","import { BehaviorSubject } from 'rxjs'\n\ninterface USBConnection {\n    device: USBDevice,\n    endpointInNumber: number;\n    endpointOutNumber: number;\n}\n\nexport default new BehaviorSubject<{ connection?: USBConnection, status: 'NOT_CONNECTED' | 'CONNECTED' }>({\n    connection: undefined,\n    status: 'NOT_CONNECTED'\n});\n","import { webusb } from './services';\nimport state from './state';\n\nconst sendCommand = async (command: string, payload: string) => {\n    if (!state.value.connection) {\n        return;\n    }\n\n    const { device, endpointOutNumber } = state.value.connection;\n    await webusb.send(device, endpointOutNumber, '\\n' + command + payload.padEnd(3));\n}\n\nconst setupDevice = async (device: USBDevice) => {\n    const { endpointInNumber, endpointOutNumber } = await webusb.initializeDevice(device);\n\n    state.next({\n        connection: {\n            device,\n            endpointInNumber,\n            endpointOutNumber,\n        },\n        status: 'CONNECTED'\n    });\n}\n\nexport const connectPairedDevice = async () => {\n    const device = await webusb.getPairedDevice();\n\n    if (!device) {\n        return;\n    }\n\n    await setupDevice(device);\n}\n\nexport const connectNewDevice = async () => {\n    const device = await webusb.pairDevice();\n\n    if (!device) {\n        return;\n    }\n\n    await setupDevice(device);\n}\n\nexport const setLCDChar = (char: string) => sendCommand('4', char);\n\nexport const setRedLEDValue = (value: number) => sendCommand('1', Math.round(value * 2.55).toString());\nexport const setYellowLEDValue = (value: number) => sendCommand('2', Math.round(value * 2.55).toString());\nexport const setGreenLEDValue = (value: number) => sendCommand('3', Math.round(value * 2.55).toString());\n","import React, { useRef, useEffect, useState } from 'react';\nimport { withStyles, WithStyles } from '@material-ui/core/styles';\nimport { Container, Grid } from '@material-ui/core';\nimport ReactDOM from 'react-dom';\n\nimport styles from './styles';\nimport AppBar from './components/AppBar';\nimport LCD from './components/LCD';\nimport LEDs from './components/LEDs';\nimport * as actions from './actions';\nimport state from './state';\n\nconst App = withStyles(styles)(({ classes }: WithStyles<typeof styles>) => {\n  const [LCDHasFocus, setLCDHasFocus] = useState(false);\n  const LCDElement = useRef<HTMLDivElement>(null);\n\n  const [connectionStatus, setConnectionStatus] = useState(state.value.status);\n  const [deviceName, setDeviceName] = useState(state.value.connection ? state.value.connection.device.productName : undefined);\n\n  const [containerStyle, setContainerStyle] = useState<{ opacity: number, pointerEvents: 'auto' | 'none' }>(\n    { pointerEvents: 'none', opacity: 0.3 }\n  );\n\n  useEffect(() => {\n    const stateSubscription = state.subscribe(s => {\n      setConnectionStatus(s.status);\n      setDeviceName(state.value.connection ? state.value.connection.device.productName : undefined);\n    });\n\n    actions.connectPairedDevice();\n\n    return () => stateSubscription.unsubscribe();\n  }, []);\n\n  useEffect(() => {\n    const updateLCDHasFocus = (event: MouseEvent) => {\n      if (!LCDElement.current) {\n        return;\n      }\n\n      const { x, y, height, width } = LCDElement.current.getBoundingClientRect();\n\n      if (\n        event.clientX >= x && event.clientX <= x + width &&\n        event.clientY >= y && event.clientY <= y + height\n      ) {\n        setLCDHasFocus(true);\n      } else {\n        setLCDHasFocus(false);\n      }\n    };\n\n    const disableComponents = () => {\n      setContainerStyle({ pointerEvents: 'none', opacity: 0.3 });\n      window.removeEventListener('click', updateLCDHasFocus);\n    }\n\n    if (connectionStatus === 'NOT_CONNECTED') {\n      disableComponents();\n      return;\n    }\n\n    window.addEventListener('click', updateLCDHasFocus);\n    setContainerStyle({ pointerEvents: 'auto' as 'auto', opacity: 1 });\n\n    return disableComponents;\n  }, [connectionStatus]);\n\n  return (\n    <Container maxWidth=\"md\" className={classes.root}>\n      <AppBar deviceName={deviceName} connectionStatus={connectionStatus} onConnectClick={actions.connectNewDevice} />\n      <Grid container spacing={1} style={containerStyle}>\n        <Grid item xs={12}>\n          <LCD\n            hasFocus={LCDHasFocus}\n            onNewCharacter={actions.setLCDChar}\n            ref={LCDElement}\n          />\n        </Grid>\n        <Grid item xs={6}>\n          <LEDs\n            onRedLedValueChange={actions.setRedLEDValue}\n            onYellowLedValueChange={actions.setYellowLEDValue}\n            onGreenLedValueChange={actions.setGreenLEDValue}\n          />\n        </Grid>\n      </Grid>\n    </Container>\n  )\n});\n\nReactDOM.render(\n  <React.StrictMode><App /></React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}